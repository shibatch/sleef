version: 1.0.{build}
max_jobs: 1
image: Visual Studio 2017
configuration: Release
install:
  - "C:\\Cygwin64\\setup-x86_64.exe -q -g -P libmpfr-devel,libgmp-devel"
  - PATH c:\\Cygwin64\\bin;c:\\Cygwin64\\usr\\bin;c:\\projects\\sleef\\build-cygwin\\bin;%PATH%
  - "C:\\Cygwin64\\bin\\bash -c 'mkdir build-cygwin;cd build-cygwin;cmake ..;cmake -j 2"
  - cd "c:\\projects\\sleef"
  - mkdir build
  - cd build
  - cmake -G"Visual Studio 15 2017 Win64" .. -DCMAKE_INSTALL_PREFIX=install -DSLEEF_SHOW_CONFIG=1 -DSLEEF_SHOW_ERROR_LOG=1
build_script:
  - cmake --build . --target install --config Release
test_script:
  - "C:\\Cygwin64\\bin\\bash -c '/cygdrive/c/projects/sleef/src/script/testOnAppveyor.sh'"
artifacts:
- path: build\install\**\*
  name: SLEEFWindowsx64
